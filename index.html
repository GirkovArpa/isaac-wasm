<script type="module">
  import Isaac from './isaac-js.js';
  import IsaacWASM from './isaac-wasm.js';

  (async () => {
    const isaacJS = new Isaac();
    const isaacWASM = await IsaacWASM();

    isaacJS.seed([1337, 123]); isaacWASM.seed([1337, 123]);

    console.log(isaacJS.rand(), isaacWASM.rand());
    console.log(isaacJS.random(), isaacWASM.random());

    isaacJS.prng(); isaacWASM.prng();

    console.log(isaacJS.rand(), isaacWASM.rand());
    console.log(isaacJS.random(), isaacWASM.random());

    const randomIntegersJS = [];
    console.time('generate 1 million random ints with JS');
    for (let i = 0; i < 1_000_000; i++) {
      randomIntegersJS.push(isaacJS.rand());
    }
    console.timeEnd('generate 1 million random ints with JS');
    //console.log(randomIntegersJS);

    console.time('generate 1 million random ints with WASM');
    const randomIntegersWASM = isaacWASM.rand(1_000_000);
    console.timeEnd('generate 1 million random ints with WASM');
    //console.log(randomIntegersWASM);

    const randomFloatsJS = [];
    console.time('generate 1 million random floats with JS');
    for (let i = 0; i < 1_000_000; i++) {
      randomFloatsJS.push(isaacJS.random());
    }
    console.timeEnd('generate 1 million random floats with JS');
    //console.log(randomFloatsJS);

    console.time('generate 1 million random floats with WASM');
    const randomFloatsWASM = isaacWASM.random(1_000_000);
    console.timeEnd('generate 1 million random floats with WASM');
    //console.log(randomFloatsWASM);
  })();
</script>